@using ItMe.Client.Utils
@using Microsoft.AspNetCore.Blazor.Services
@inherits BlazorLayoutComponent
@inject TokenManager TokenManager
@inject IUriHelper UriHelper

<div class="sidebar">
    <NavMenu />
</div>

<div class="main">
    <div class="top-row px-4">
        @if (TokenManager.IsLoggedIn)
        {
            <a href="javascript:void(0);" onclick="@SignOut" class="ml-md-auto">Sign Out</a>
        }
        else
        {
            <div>
                <a href="/login">Login</a>
            </div>
            <div>or</div>
            <div>
                <a href="/register">Register</a>
            </div>
        }
    </div>

    <div class="content px-4">
        @Body
    </div>
</div>

@functions {
    protected override void OnInit()
    {
    }

    private void SignOut()
    {
        TokenManager.ProcessLogout();
        UriHelper.NavigateTo("/login");
    }
}